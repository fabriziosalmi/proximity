# ============================================================================
# DATABASE CLEANUP SERVICE CONFIGURATION
# ============================================================================
# The cleanup service removes stale database records to prevent conflicts
# and free up resources. It runs automatically in the background.

# Enable/disable automatic cleanup (default: true)
# Set to false to completely disable cleanup
CLEANUP_ENABLED=true

# Hours to keep apps with 'error' status before cleanup (default: 24)
# Users with few machines and frequent testing might want longer retention:
#   - 1-4 hours: Aggressive cleanup for busy homelabs
#   - 24 hours: Default for most users
#   - 72-168 hours (3-7 days): Conservative for production or low-activity systems
ERROR_RETENTION_HOURS=24

# Enable cleanup of "ghost" apps (DB records without Proxmox containers) (default: true)
# Ghost apps occur when:
# - Deployment fails after creating DB record but before/during container creation
# - Container is manually deleted from Proxmox but DB record remains
# - System crashes during deployment
# Recommended: Keep enabled unless you need to debug deployment issues
GHOST_CLEANUP_ENABLED=true

# How often to run cleanup in minutes (default: 60)
# Recommended values:
#   - 15-30 minutes: Busy systems with frequent deployments
#   - 60 minutes: Default for most users
#   - 120-240 minutes: Low-activity systems
CLEANUP_INTERVAL_MINUTES=60

# Dry run mode - log what would be deleted without actually deleting (default: false)
# Useful for testing or auditing cleanup behavior
# Set to true to see what would be cleaned up without making changes
CLEANUP_DRY_RUN=false

# ============================================================================
# USAGE RECOMMENDATIONS BY USER TYPE
# ============================================================================
#
# HOMELAB WITH FEW MACHINES (high deployment frequency):
#   ERROR_RETENTION_HOURS=4
#   CLEANUP_INTERVAL_MINUTES=30
#   Rationale: Quick cleanup to free resources, frequent testing creates many errors
#
# HOMELAB WITH MANY MACHINES (low deployment frequency):
#   ERROR_RETENTION_HOURS=72
#   CLEANUP_INTERVAL_MINUTES=120
#   Rationale: More resources available, keep records longer for debugging
#
# PRODUCTION/SMALL TEAM:
#   ERROR_RETENTION_HOURS=168
#   CLEANUP_INTERVAL_MINUTES=240
#   Rationale: Keep records for a week for audit/debugging, cleanup is less critical
#
# DEVELOPMENT/TESTING:
#   ERROR_RETENTION_HOURS=1
#   CLEANUP_INTERVAL_MINUTES=15
#   CLEANUP_DRY_RUN=false
#   Rationale: Aggressive cleanup during active development
#
# ============================================================================
