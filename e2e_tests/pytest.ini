[pytest]
# Pytest configuration for Proximity E2E tests

# CRITICAL: Set testpaths to only search in e2e_tests to avoid loading
# the wrong conftest.py from the tests/ directory
testpaths = .
norecursedirs = ../tests ../backend

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum Python version
minversion = 3.11

# Add current directory to Python path
pythonpath = .

# Test output options
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    --capture=no

# Markers for test categorization
markers =
    smoke: Quick smoke tests (run first)
    auth: Authentication and authorization tests
    lifecycle: Full application lifecycle tests
    critical: Critical path tests (high priority)
    management: Application management tests
    navigation: Navigation and UI tests
    settings: Settings and configuration tests
    infrastructure: Infrastructure and system tests
    canvas: In-app Canvas iframe embedding tests
    update: Application update workflow tests
    e2e: End-to-end integration tests
    backup: Backup and restore tests
    volumes: Volume management and persistent data tests
    monitoring: Monitoring and metrics tests
    slow: Tests that take longer than 60 seconds
    skip_in_ci: Skip these tests in CI environment
    clone: Application cloning tests
    dual_mode: Dual mode experience tests
    config: Configuration tests

# Timeout for tests (override with @pytest.mark.timeout decorator)
timeout = 300

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Playwright specific
playwright_browser = chromium
playwright_launch_headless = false
playwright_slowmo = 0  # Milliseconds to slow down Playwright operations
